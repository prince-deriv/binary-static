{"version":3,"sources":["webpack://deriv-com/./src/pages/academy/blog/posts/preview/index.js"],"names":["WithIntl","useState","data","setData","id","setId","useEffect","fetchBlogPreview","url","fetch","cache","res","json","getPreviews","dataFromServer","window","scrollTo","isBrowser","query_string","location","search","params","URLSearchParams","get","getPreviewId","post_data","article_title","blog_title","footer_banner_data","footer_banners","side_banner_data","side_banners","side_banner_data_details","max_w_value","max_w_tablet","isExternal","redirectLink","cta_url","imgSrcDesktop","banner_image","footer_banner_details","desktop_banner_image","imgSrcMobile","mobile_banner_image","type","description","meta_description","title","meta_title","no_index","padding","position","jc","ai","to","color","src","RightArrow","height","width","mt","lh","mb","size","published_date","convertDate","as","read_time_in_minutes","localize","min_width","fd","mr","fw","max-width","tags","map","tag","tags_id","key","tag_name","max_width","author","image","cms_assets_end_point","alt","name","tabletL","main_image","detailsPreviewObj","margin","dangerouslySetInnerHTML","__html","blog_post","replace"],"mappings":"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","file":"component---src-pages-academy-blog-posts-preview-index-js-c138e55b3b232877921f.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n    ArticleTitle,\n    Background,\n    HeroContainer,\n    BreadcrumbsWrapper,\n    HeroLeftWrapper,\n    HeroRightWrapper,\n    HeroImageContainer,\n    InfoText,\n    WriterImage,\n    WrittenbyText,\n    BodyContainer,\n    LeftBodyContainerWrapper,\n    RightBodyContainerWrapper,\n    SideBarContainer,\n    Tag,\n    PreviewContainer,\n    SocialComponentsWrapper,\n    LeftSocialComponents,\n    RightSocialComponents,\n    DesktopWrapper,\n    MobileWrapper,\n    DesktopBreadcrumbsWrapper,\n    MobileBreadcrumbsWrapper,\n    StyledImg,\n    StyledBreadcrumbsLink,\n    StyledBreadcrumbsTitle,\n} from '../_style'\nimport Banner from '../../../components/_banner'\nimport SocialSharing from '../../../components/_social-sharing'\nimport ArticleEmailBanner from '../../../components/_side-subscription-banner'\nimport { localize, WithIntl } from 'components/localization'\nimport Layout from 'components/layout/layout'\nimport { SEO, Show, Box, Flex, SectionContainer } from 'components/containers'\nimport { convertDate, isBrowser } from 'common/utility'\nimport { cms_assets_end_point } from 'common/constants'\nimport RightArrow from 'images/svg/tools/black-right-arrow.svg'\n\nconst BlogPreview = () => {\n    const [data, setData] = useState(null)\n    const [id, setId] = useState(null)\n    const end_point_url = 'https://cms.deriv.cloud/items/blog/'\n\n    useEffect(() => {\n        const getPreviewId = () => {\n            if (isBrowser()) {\n                const query_string = window.location.search\n                const url_params = new URLSearchParams(query_string)\n                const params = url_params.get('id')\n                if (params) {\n                    setId(params)\n                }\n            }\n        }\n\n        const fetchBlogPreview = async () => {\n            const url = `${end_point_url}${id}?access_token=${process.env.GATSBY_DIRECTUS_AUTH_TOKEN}&fields=*.*.*.*.*`\n            const res = await fetch(url, { cache: 'no-store' })\n            return await res.json()\n        }\n\n        const getPreviews = async () => {\n            const dataFromServer = await fetchBlogPreview()\n            setData(dataFromServer)\n            if (dataFromServer) {\n                window.scrollTo(0, 0)\n            }\n        }\n\n        getPreviewId()\n        if (id) {\n            getPreviews()\n        }\n    }, [id])\n\n    const post_data = data?.data\n    const article_title = post_data?.blog_title\n    const footer_banner_data = post_data?.footer_banners\n    const side_banner_data = post_data?.side_banners\n\n    const side_banner_data_details = {\n        max_w_value: '328px',\n        max_w_tablet: '320px',\n        isExternal: true,\n        redirectLink: side_banner_data?.cta_url,\n        imgSrcDesktop: side_banner_data?.banner_image?.id,\n    }\n\n    const footer_banner_details = {\n        max_w_value: '792px',\n        max_w_tablet: '580px',\n        isExternal: true,\n        redirectLink: footer_banner_data?.cta_url,\n        imgSrcDesktop: footer_banner_data?.desktop_banner_image?.id,\n        imgSrcMobile: footer_banner_data?.mobile_banner_image?.id,\n    }\n\n    return (\n        <Layout type=\"academy\">\n            <SEO description={post_data?.meta_description} title={post_data?.meta_title} no_index />\n            <>\n                {post_data && (\n                    <SectionContainer padding=\"0\" position=\"relative\">\n                        <Background>\n                            <BreadcrumbsWrapper>\n                                <Flex jc=\"flex-start\" ai=\"center\">\n                                    <StyledBreadcrumbsLink to=\"/academy/\" color=\"grey-5\">\n                                        Home\n                                    </StyledBreadcrumbsLink>\n                                    <StyledImg src={RightArrow} height=\"16\" width=\"16\" />\n                                    <StyledBreadcrumbsLink to=\"/academy/blog/\" color=\"grey-5\">\n                                        All articles\n                                    </StyledBreadcrumbsLink>\n                                    <StyledImg src={RightArrow} height=\"16\" width=\"16\" />\n                                    <DesktopBreadcrumbsWrapper>\n                                        <StyledBreadcrumbsTitle>\n                                            {article_title}\n                                        </StyledBreadcrumbsTitle>\n                                    </DesktopBreadcrumbsWrapper>\n                                </Flex>\n                                <MobileBreadcrumbsWrapper>\n                                    <Flex width=\"auto\" jc=\"flex-start\" mt=\"10px\">\n                                        <StyledBreadcrumbsTitle lh=\"20px\">\n                                            {article_title}\n                                        </StyledBreadcrumbsTitle>\n                                    </Flex>\n                                </MobileBreadcrumbsWrapper>\n                            </BreadcrumbsWrapper>\n                            <HeroContainer>\n                                <HeroLeftWrapper width=\"100%\">\n                                    <InfoText mb=\"16px\" size=\"14px\">\n                                        {post_data?.published_date &&\n                                            convertDate(post_data?.published_date)}\n                                    </InfoText>\n                                    <ArticleTitle as=\"h1\" type=\"page-title\">\n                                        {post_data?.blog_title}\n                                    </ArticleTitle>\n                                    <InfoText size=\"14px\" mt=\"16px\">\n                                        {post_data?.read_time_in_minutes &&\n                                            post_data?.read_time_in_minutes +\n                                                ' ' +\n                                                localize('min read')}\n                                    </InfoText>\n                                    <Show.Mobile min_width=\"laptop\">\n                                        <SideBarContainer fd=\"column\" mr=\"126px\" height=\"auto\">\n                                            <Flex\n                                                fw=\"wrap\"\n                                                jc=\"flex-start\"\n                                                max-width=\"100%\"\n                                                width=\" 100%\"\n                                            >\n                                                {post_data?.tags.map((tag) => {\n                                                    return (\n                                                        <>\n                                                            {tag?.tags_id?.id && (\n                                                                <Tag key={tag?.tags_id?.id}>\n                                                                    {tag?.tags_id?.tag_name}\n                                                                </Tag>\n                                                            )}\n                                                        </>\n                                                    )\n                                                })}\n                                            </Flex>\n                                        </SideBarContainer>\n                                    </Show.Mobile>\n\n                                    <Show.Desktop max_width=\"laptop\">\n                                        {post_data?.author && (\n                                            <Flex ai=\"center\" mt=\"40px\" jc=\"flex-start\">\n                                                <>\n                                                    {post_data?.author?.image && (\n                                                        <WriterImage>\n                                                            <img\n                                                                src={`${cms_assets_end_point}${post_data?.author?.image.id}`}\n                                                                alt=\"\"\n                                                                width=\"48\"\n                                                                height=\"48\"\n                                                            />\n                                                        </WriterImage>\n                                                    )}\n                                                </>\n\n                                                <Box>\n                                                    <WrittenbyText color=\"grey-5\" size=\"12px\">\n                                                        {localize('Written by')}\n                                                    </WrittenbyText>\n                                                    <InfoText>{post_data?.author?.name}</InfoText>\n                                                </Box>\n                                            </Flex>\n                                        )}\n                                    </Show.Desktop>\n                                </HeroLeftWrapper>\n                                <HeroRightWrapper>\n                                    <HeroImageContainer tabletL={{ mt: '24px' }}>\n                                        <img\n                                            src={`${cms_assets_end_point}${post_data?.main_image?.id}`}\n                                            alt=\"\"\n                                        />\n                                    </HeroImageContainer>\n                                </HeroRightWrapper>\n                            </HeroContainer>\n                        </Background>\n\n                        <BodyContainer>\n                            <LeftBodyContainerWrapper>\n                                <Show.Mobile min_width=\"laptop\">\n                                    {post_data?.author && (\n                                        <Flex ai=\"center\" jc=\"flex-start\">\n                                            <>\n                                                {post_data?.author?.image && (\n                                                    <WriterImage>\n                                                        <img\n                                                            src={`${cms_assets_end_point}${post_data?.author?.image.id}`}\n                                                            alt=\"\"\n                                                        />\n                                                    </WriterImage>\n                                                )}\n                                            </>\n\n                                            <Box>\n                                                <WrittenbyText color=\"grey-5\" size=\"12px\">\n                                                    {localize('Written by')}\n                                                </WrittenbyText>\n                                                <InfoText>{post_data?.author?.name}</InfoText>\n                                            </Box>\n                                        </Flex>\n                                    )}\n                                </Show.Mobile>\n                                <Show.Desktop max_width=\"laptop\">\n                                    <SideBarContainer fd=\"column\" height=\"auto\">\n                                        <Flex\n                                            jc=\"flex-start\"\n                                            mb=\"40px\"\n                                            fw=\"wrap\"\n                                            max-width=\"255px\"\n                                            width=\" 100%\"\n                                        >\n                                            {post_data?.tags.map((tag) => {\n                                                return (\n                                                    <>\n                                                        {tag?.tags_id?.id && (\n                                                            <Tag key={tag?.tags_id?.id}>\n                                                                {tag?.tags_id?.tag_name}\n                                                            </Tag>\n                                                        )}\n                                                    </>\n                                                )\n                                            })}\n                                        </Flex>\n                                        {side_banner_data_details && (\n                                            <Banner detailsPreviewObj={side_banner_data_details} />\n                                        )}\n                                        <DesktopWrapper>\n                                            <ArticleEmailBanner />\n                                        </DesktopWrapper>\n                                    </SideBarContainer>\n                                </Show.Desktop>\n                            </LeftBodyContainerWrapper>\n                            <RightBodyContainerWrapper>\n                                <Flex fd=\"column\" margin=\"0 auto\" ai=\"center\">\n                                    <PreviewContainer\n                                        dangerouslySetInnerHTML={{\n                                            __html: post_data?.blog_post\n                                                .replace(/<p><img /g, '<img ')\n                                                .replace(/\\/><\\/p>/g, '/>'),\n                                        }}\n                                    />\n\n                                    {footer_banner_details && (\n                                        <Banner detailsPreviewObj={footer_banner_details} />\n                                    )}\n                                    <SocialComponentsWrapper>\n                                        <LeftSocialComponents />\n                                        <RightSocialComponents>\n                                            <SocialSharing />\n                                        </RightSocialComponents>\n                                    </SocialComponentsWrapper>\n\n                                    {side_banner_data_details && (\n                                        <Show.Mobile>\n                                            <Flex mt=\"24px\">\n                                                <Banner\n                                                    detailsPreviewObj={side_banner_data_details}\n                                                />\n                                            </Flex>\n                                        </Show.Mobile>\n                                    )}\n                                    <MobileWrapper>\n                                        <ArticleEmailBanner />\n                                    </MobileWrapper>\n                                </Flex>\n                            </RightBodyContainerWrapper>\n                        </BodyContainer>\n                    </SectionContainer>\n                )}\n            </>\n        </Layout>\n    )\n}\n\nBlogPreview.propTypes = {\n    pageContext: PropTypes.object,\n}\n\nexport default WithIntl()(BlogPreview)\n"],"sourceRoot":""}